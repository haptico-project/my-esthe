import{w as f}from"./DT5O6MqF.js";import{p as l}from"./DplN-f9j.js";import{z as y}from"./CeuAZJ2a.js";const m="https://payflow-backend.fly.dev";async function u(n,e={}){const{method:t="GET",headers:g={},body:r,queryParams:a,skipJsonParse:p=!1}=e;let c=`${m}${n}`;if(a){const o=new URLSearchParams;for(const i in a)o.append(i,String(a[i]));c+=`?${o.toString()}`}const s=await fetch(c,{method:t,headers:{"Content-Type":"application/json",...g},...r&&{body:JSON.stringify(r)}});if(!s.ok){const o=p?s.statusText:(await s.json()).message;throw new Error(o||`Request failed with status ${s.status}`)}return s}const d=f(null);function S(){const e=y(l).url.searchParams.get("agencyCode")??"2139",t=sessionStorage.getItem("agencyCode");e?u(`/api/v1/shop/agency?code=${e}`,{method:"GET"}).then(()=>{sessionStorage.setItem("agencyCode",e),d.set(e)}).catch(()=>{alert("不正な店舗コードです。")}):t&&d.set(t)}export{d as a,S as i};
